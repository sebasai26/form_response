<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estad√≠sticas Mensuales - Asistente Cl√≠nica</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #2c3e50;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #10b981;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
        }

        .status-icon {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
        }

        h1 {
            color: #1e293b;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .subtitle {
            color: #64748b;
            font-size: 15px;
            line-height: 1.5;
        }

        .period-info {
            display: inline-block;
            background: #f1f5f9;
            color: #475569;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 13px;
            font-weight: 500;
            margin-top: 12px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .metric-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .metric-icon.blue {
            background: #dbeafe;
            color: #2563eb;
        }

        .metric-icon.green {
            background: #dcfce7;
            color: #16a34a;
        }

        .metric-icon.red {
            background: #fee2e2;
            color: #dc2626;
        }

        .metric-icon.purple {
            background: #ede9fe;
            color: #7c3aed;
        }

        .metric-label {
            color: #64748b;
            font-size: 13px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .metric-value {
            font-size: 32px;
            font-weight: 700;
            color: #1e293b;
        }

        .section {
            background: white;
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            color: #1e293b;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .impact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .impact-item {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 24px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .impact-item:hover {
            border-color: #2563eb;
            background: #f1f5f9;
        }

        .impact-item.active {
            border-color: #2563eb;
            background: #eff6ff;
        }

        .impact-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .impact-icon {
            font-size: 24px;
        }

        .expand-icon {
            color: #94a3b8;
            font-size: 12px;
            transition: transform 0.3s ease;
        }

        .impact-item.active .expand-icon {
            transform: rotate(180deg);
        }

        .impact-value {
            font-size: 28px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .impact-label {
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .impact-breakdown {
            color: #94a3b8;
            font-size: 12px;
            font-family: 'Courier New', monospace;
        }

        .impact-details {
            display: none;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #e2e8f0;
            font-size: 13px;
            color: #64748b;
            line-height: 1.6;
        }

        .impact-item.active .impact-details {
            display: block;
        }

        .impact-details strong {
            color: #475569;
            display: block;
            margin-bottom: 8px;
        }

        .total-impact {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            border-radius: 8px;
            padding: 32px;
            text-align: center;
            color: white;
        }

        .total-label {
            font-size: 14px;
            font-weight: 500;
            opacity: 0.9;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .total-value {
            font-size: 48px;
            font-weight: 700;
        }

        .methodology-toggle {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            margin-top: 24px;
            overflow: hidden;
        }

        .methodology-header {
            padding: 16px 24px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s ease;
        }

        .methodology-header:hover {
            background: #f1f5f9;
        }

        .methodology-title {
            color: #1e293b;
            font-size: 15px;
            font-weight: 600;
        }

        .methodology-arrow {
            color: #94a3b8;
            font-size: 12px;
            transition: transform 0.3s ease;
        }

        .methodology-toggle.active .methodology-arrow {
            transform: rotate(180deg);
        }

        .methodology-content {
            display: none;
            padding: 0 24px 24px 24px;
            color: #64748b;
            font-size: 14px;
            line-height: 1.8;
        }

        .methodology-toggle.active .methodology-content {
            display: block;
        }

        .methodology-content p {
            margin-bottom: 16px;
        }

        .calculation-example {
            background: white;
            border-left: 3px solid #2563eb;
            padding: 12px 16px;
            margin: 12px 0;
            border-radius: 4px;
            font-size: 13px;
        }

        .calculation-example strong {
            color: #1e293b;
            display: block;
            margin-bottom: 4px;
        }

        .footer {
            text-align: center;
            padding: 24px;
            color: #94a3b8;
            font-size: 13px;
        }

        @media (max-width: 768px) {
            body {
                padding: 20px 16px;
            }

            .header {
                padding: 24px;
            }

            .header-top {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            h1 {
                font-size: 24px;
            }

            .metrics-grid,
            .impact-grid {
                grid-template-columns: 1fr;
            }

            .metric-value {
                font-size: 28px;
            }

            .total-value {
                font-size: 40px;
            }

            .section {
                padding: 24px;
            }
        }

        @media print {
            body {
                background: white;
            }

            .metric-card,
            .section {
                box-shadow: none;
                border: 1px solid #e2e8f0;
            }

            .impact-item {
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Encabezado -->
        <div class="header">
            <div class="header-top">
                <div>
                    <h1>üìä Estad√≠sticas Mensuales</h1>
                    <p class="subtitle">Asistente Cl√≠nica</p>
                    <div class="period-info">
                        <span id="currentMonth">Noviembre 2025</span>
                    </div>
                </div>
                <div class="status-badge">
                    <span class="status-icon"></span>
                    Activo
                </div>
            </div>
        </div>

        <!-- M√©tricas Principales -->
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-icon blue">üì±</div>
                </div>
                <div class="metric-label">Recordatorios Enviados</div>
                <div class="metric-value" id="recordatoriosEnviados">0</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-icon green">‚≠ê</div>
                </div>
                <div class="metric-label">Rese√±as Recibidas</div>
                <div class="metric-value" id="resenasRecibidas">0</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-icon red">‚úï</div>
                </div>
                <div class="metric-label">Citas Perdidas</div>
                <div class="metric-value" id="citasPerdidas">0</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-header">
                    <div class="metric-icon purple">üìä</div>
                </div>
                <div class="metric-label">Tasa de Asistencia</div>
                <div class="metric-value" id="tasaAsistencia">0%</div>
            </div>
        </div>

        <!-- An√°lisis de Impacto Econ√≥mico -->
        <div class="section">
            <h2 class="section-title">üí∞ Impacto Econ√≥mico</h2>
            
            <div class="impact-grid">
                <div class="impact-item" onclick="toggleDetails(this)">
                    <div class="impact-header">
                        <span class="impact-icon">‚è±Ô∏è</span>
                        <span class="expand-icon">‚ñº</span>
                    </div>
                    <div class="impact-value" id="tiempoAhorrado">0h</div>
                    <div class="impact-label">Tiempo Ahorrado</div>
                    <div class="impact-breakdown" id="tiempoBreakdown">-</div>
                    <div class="impact-details">
                        <strong>¬øC√≥mo se calcula?</strong>
                        Un recordatorio manual toma unos 3 minutos en enviarse. Se multiplican los recordatorios enviados por 3 minutos para calcular el tiempo ahorrado.
                    </div>
                </div>
                
                <div class="impact-item" onclick="toggleDetails(this)">
                    <div class="impact-header">
                        <span class="impact-icon">üíº</span>
                        <span class="expand-icon">‚ñº</span>
                    </div>
                    <div class="impact-value" id="ingresosRecuperados">‚Ç¨0</div>
                    <div class="impact-label">Citas Recuperadas</div>
                    <div class="impact-breakdown" id="ingresosBreakdown">-</div>
                    <div class="impact-details">
                        <strong>¬øC√≥mo se calcula?</strong>
                        Antes se perd√≠an unas 4 citas al mes. Con los recordatorios autom√°ticos se pierden menos. La diferencia son las citas recuperadas, multiplicadas por ‚Ç¨30 (precio promedio de sesi√≥n).
                    </div>
                </div>
                
                <div class="impact-item" onclick="toggleDetails(this)">
                    <div class="impact-header">
                        <span class="impact-icon">‚ö°</span>
                        <span class="expand-icon">‚ñº</span>
                    </div>
                    <div class="impact-value" id="valorTiempo">‚Ç¨0</div>
                    <div class="impact-label">Valor del Tiempo</div>
                    <div class="impact-breakdown" id="valorTiempoBreakdown">-</div>
                    <div class="impact-details">
                        <strong>¬øC√≥mo se calcula?</strong>
                        El tiempo ahorrado tiene un valor econ√≥mico. Se calcula que una hora vale ‚Ç¨30 (lo que se cobra por una sesi√≥n). Ese tiempo se puede usar para atender m√°s pacientes.
                    </div>
                </div>
                
                <div class="impact-item" onclick="toggleDetails(this)">
                    <div class="impact-header">
                        <span class="impact-icon">üéØ</span>
                        <span class="expand-icon">‚ñº</span>
                    </div>
                    <div class="impact-value" id="valorResenas">‚Ç¨0</div>
                    <div class="impact-label">Valor de Rese√±as</div>
                    <div class="impact-breakdown" id="resenasBreakdown">-</div>
                    <div class="impact-details">
                        <strong>¬øC√≥mo se calcula?</strong>
                        Cada rese√±a positiva atrae nuevos pacientes. Se estima que cada rese√±a vale unos ‚Ç¨10 en publicidad gratuita (dinero que se ahorra en anuncios).
                    </div>
                </div>
            </div>
            
            <!-- Impacto Total -->
            <div class="total-impact">
                <div class="total-label">Impacto Total del Mes</div>
                <div class="total-value" id="impactoTotal">‚Ç¨0</div>
            </div>

            <!-- Metodolog√≠a desplegable -->
            <div class="methodology-toggle" id="methodologyToggle" onclick="toggleMethodology()">
                <div class="methodology-header">
                    <div class="methodology-title">üìã ¬øC√≥mo calculamos el impacto econ√≥mico?</div>
                    <span class="methodology-arrow">‚ñº</span>
                </div>
                <div class="methodology-content">
                    <p>El impacto econ√≥mico total es la suma de cuatro cosas:</p>
                    
                    <div class="calculation-example">
                        <strong>1. Tiempo Ahorrado</strong>
                        Cada vez que el sistema env√≠a un recordatorio autom√°tico, se ahorran 3 minutos que antes se usaban para llamar o enviar WhatsApp manualmente.
                    </div>

                    <div class="calculation-example">
                        <strong>2. Citas Recuperadas</strong>
                        Antes del sistema, se perd√≠an unas 4 citas al mes por olvidos. Con los recordatorios autom√°ticos se pierden menos. Cada cita recuperada son ‚Ç¨30.
                    </div>

                    <div class="calculation-example">
                        <strong>3. Valor del Tiempo</strong>
                        El tiempo ahorrado tiene un valor. Se usa ‚Ç¨30 por hora (lo que se cobra en una sesi√≥n). Ese tiempo se puede invertir en atender pacientes o descansar.
                    </div>

                    <div class="calculation-example">
                        <strong>4. Valor de las Rese√±as</strong>
                        Las rese√±as positivas atraen nuevos pacientes sin gastar en publicidad. Cada rese√±a tiene un valor aproximado de ‚Ç¨10 en marketing.
                    </div>

                    <p style="margin-top: 16px;"><strong>Ejemplo con los datos actuales:</strong></p>
                    <p id="calculationExample"></p>
                </div>
            </div>
        </div>

        <div class="footer">
            Asistente Cl√≠nica
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURACI√ìN DE DATOS
        // ============================================
        
        const recordatoriosEnviados = 37;
        const resenasRecibidas = 7;
        const citasPerdidas = 0;
        const enlacesResenasEnviados = 36;
        
        // Constantes econ√≥micas
        const PRECIO_SESION = 30;
        const VALOR_HORA_PROFESIONAL = 30;
        const MINUTOS_POR_RECORDATORIO = 3;
        const CITAS_ANTES_SISTEMA = 4;
        const VALOR_RESENA_MIN = 7;
        const VALOR_RESENA_MAX = 12;
        
        // ============================================
        // C√ÅLCULOS
        // ============================================
        
        const citasAsistidas = recordatoriosEnviados - citasPerdidas;
        const tasaAsistencia = recordatoriosEnviados > 0 
            ? ((citasAsistidas / recordatoriosEnviados) * 100).toFixed(1)
            : 0;
        
        const conversionResenas = enlacesResenasEnviados > 0
            ? ((resenasRecibidas / enlacesResenasEnviados) * 100).toFixed(1)
            : 0;
        
        const citasRecuperadas = Math.max(0, CITAS_ANTES_SISTEMA - citasPerdidas);
        const ingresosRecuperados = citasRecuperadas * PRECIO_SESION;
        
        const minutosAhorrados = recordatoriosEnviados * MINUTOS_POR_RECORDATORIO;
        const horasAhorradas = (minutosAhorrados / 60).toFixed(1);
        
        const valorTiempoAhorrado = Math.round(parseFloat(horasAhorradas) * VALOR_HORA_PROFESIONAL);
        
        const valorPromedioResena = (VALOR_RESENA_MIN + VALOR_RESENA_MAX) / 2;
        const valorTotalResenas = Math.round(resenasRecibidas * valorPromedioResena);
        
        const impactoTotal = ingresosRecuperados + valorTiempoAhorrado + valorTotalResenas;
        
        // ============================================
        // ACTUALIZACI√ìN DE INTERFAZ
        // ============================================
        
        const meses = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                       'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
        const fechaActual = new Date();
        
        document.getElementById('currentMonth').textContent = 
            `${meses[fechaActual.getMonth()]} ${fechaActual.getFullYear()}`;
        
        document.getElementById('recordatoriosEnviados').textContent = recordatoriosEnviados;
        document.getElementById('resenasRecibidas').textContent = resenasRecibidas;
        document.getElementById('citasPerdidas').textContent = citasPerdidas;
        document.getElementById('tasaAsistencia').textContent = tasaAsistencia + '%';
        
        document.getElementById('tiempoAhorrado').textContent = horasAhorradas + 'h';
        document.getElementById('ingresosRecuperados').textContent = '‚Ç¨' + ingresosRecuperados;
        document.getElementById('valorTiempo').textContent = '‚Ç¨' + valorTiempoAhorrado;
        document.getElementById('valorResenas').textContent = '‚Ç¨' + valorTotalResenas;
        document.getElementById('impactoTotal').textContent = '‚Ç¨' + impactoTotal;
        
        document.getElementById('tiempoBreakdown').textContent = 
            `${recordatoriosEnviados} √ó ${MINUTOS_POR_RECORDATORIO}min`;
        
        document.getElementById('ingresosBreakdown').textContent = 
            `${citasRecuperadas} citas √ó ‚Ç¨${PRECIO_SESION}`;
        
        document.getElementById('valorTiempoBreakdown').textContent = 
            `${horasAhorradas}h √ó ‚Ç¨${VALOR_HORA_PROFESIONAL}/h`;
        
        document.getElementById('resenasBreakdown').textContent = 
            `${resenasRecibidas} √ó ‚Ç¨${valorPromedioResena.toFixed(0)}`;
        
        // Actualizar ejemplo de c√°lculo
        document.getElementById('calculationExample').innerHTML = `
            ‚Ä¢ Tiempo: ${recordatoriosEnviados} √ó ${MINUTOS_POR_RECORDATORIO} min = ${minutosAhorrados} min = ${horasAhorradas} horas √ó ‚Ç¨${VALOR_HORA_PROFESIONAL} = ‚Ç¨${valorTiempoAhorrado}<br>
            ‚Ä¢ Citas recuperadas: ${citasRecuperadas} citas √ó ‚Ç¨${PRECIO_SESION} = ‚Ç¨${ingresosRecuperados}<br>
            ‚Ä¢ Rese√±as: ${resenasRecibidas} √ó ‚Ç¨${valorPromedioResena.toFixed(0)} = ‚Ç¨${valorTotalResenas}<br>
            <strong>Total: ‚Ç¨${impactoTotal}</strong>
        `;
        
        // ============================================
        // ANIMACIONES
        // ============================================
        
        function animateCounter(elementId, finalValue, duration = 1000, suffix = '') {
            const element = document.getElementById(elementId);
            const isPercentage = suffix === '%';
            const isCurrency = suffix.includes('‚Ç¨');
            
            let numericValue = parseFloat(finalValue.toString().replace(/[^0-9.]/g, ''));
            
            const startValue = 0;
            const increment = numericValue / (duration / 16);
            let currentValue = startValue;
            
            const timer = setInterval(() => {
                currentValue += increment;
                if (currentValue >= numericValue) {
                    currentValue = numericValue;
                    clearInterval(timer);
                }
                
                if (isCurrency) {
                    element.textContent = '‚Ç¨' + Math.floor(currentValue);
                } else if (isPercentage) {
                    element.textContent = currentValue.toFixed(1) + '%';
                } else if (suffix === 'h') {
                    element.textContent = currentValue.toFixed(1) + 'h';
                } else {
                    element.textContent = Math.floor(currentValue);
                }
            }, 16);
        }
        
        setTimeout(() => {
            animateCounter('recordatoriosEnviados', recordatoriosEnviados, 1000);
            animateCounter('resenasRecibidas', resenasRecibidas, 1000);
            animateCounter('citasPerdidas', citasPerdidas, 1000);
            animateCounter('tasaAsistencia', tasaAsistencia, 1000, '%');
            animateCounter('tiempoAhorrado', horasAhorradas, 1000, 'h');
            animateCounter('ingresosRecuperados', ingresosRecuperados, 1000, '‚Ç¨');
            animateCounter('valorTiempo', valorTiempoAhorrado, 1000, '‚Ç¨');
            animateCounter('valorResenas', valorTotalResenas, 1000, '‚Ç¨');
            animateCounter('impactoTotal', impactoTotal, 1500, '‚Ç¨');
        }, 300);
        
        function toggleDetails(element) {
            element.classList.toggle('active');
        }

        function toggleMethodology() {
            document.getElementById('methodologyToggle').classList.toggle('active');
        }
    </script>
</body>
</html>
